From ebad616763abe246ac4ddda22885a58be0af7497 Mon Sep 17 00:00:00 2001
From: zrj <rimvydas.jasinskas@gmail.com>
Date: Sun, 2 Feb 2020 12:53:58 +0200
Subject: [PATCH 17/22] find(1): Check for FTS_CONST just like mtree(8).

 For compatibility with OpenBSD.
---
 usr.bin/find/find.c | 10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)

diff --git a/usr.bin/find/find.c b/usr.bin/find/find.c
index 51e0df3a94..bc0a554228 100644
--- a/usr.bin/find/find.c
+++ b/usr.bin/find/find.c
@@ -46,16 +46,20 @@
 
 #include "find.h"
 
-static int find_compare(const FTSENT * const *s1, const FTSENT * const *s2);
+#if defined(__FreeBSD__) || defined(__DragonFly__)
+#define	FTS_CONST const
+#else
+#define	FTS_CONST
+#endif
 
 /*
  * find_compare --
- *	tell fts_open() how to order the traversal of the hierarchy. 
+ *	tell fts_open() how to order the traversal of the hierarchy.
  *	This variant gives lexicographical order, i.e., alphabetical
  *	order within each directory.
  */
 static int
-find_compare(const FTSENT * const *s1, const FTSENT * const *s2)
+find_compare(const FTSENT *FTS_CONST *s1, const FTSENT *FTS_CONST *s2)
 {
 
 	return (strcoll((*s1)->fts_name, (*s2)->fts_name));
-- 
2.25.0

